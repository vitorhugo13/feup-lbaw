# A7: High-level architecture. Privileges. Web resources specification

**LAMA** is a website that allows users to propose questions to each other, about their individual circumstances and experiences, or inversely, to expose one's particular situation and allow others to question them. Our main goal is to create a **clean**, **minimalist** and **useful** platform, allowing all participants to have a great experience.   

This artefact's goal is to define the platform's high-level architecture. To achieve this, we first explore our system's modules, dividing the main features between them. Afterwards, we describe the various privileges that users may have while using **LAMA**. Finally, a thourough description of the most important web resources and API response types is done to better describe and organize the platform's architecture.

## 1. Overview

|           Module          |      Description      |
| ------------------------- | --------------------- |
| **[M01](#module-m01-content-browsing-visualization): Content Browsing & Visualization** | Web resources related with browsing and visualizing content, including: viewing posts, viewing comments, browse posts on homepage and personal feed, search post on the platform, order and filter search results, list all categories and browse all posts inside a category. |
| **[M02](#module-m02-content-management): Content Management** | Web resources responsible for editing, creating and deleting content. This include: creating posts, commenting on them, replying to comments, editing and deleting posts and comments, adding and renaming categories and moving posts between categories. |
| **[M03](#module-m03-user-interactions): User Interactions** | Web resources related with interactions that users have with content: star and unstar posts/categories, upvote and downvote posts/comments, report content, see notifications and contest reports. |
| **[M04](#module-m04-static-pages-user-management): Static Pages & User Management** | Web resources associated with static content and managing users permissions: 404 page, 403 page, team page, regulations page, promote and demote users.|
| **[M05](#module-m05-authentication): Authentication** | Web resources associated with user authentication, includes features like: log in, logout, sign up and recover password. |
| **[M06](#module-m06-profile-management): Profile management** | Web resources associated with a user's profile management, including features like: view, delete and edit the profile. |
| **[M07](#module-m07-moderators-reporting-system): Moderators & Reporting System** | Web resources associated with the report system and moderator actions, some example features are: view reports and contests, resolve contests and review reports. |



## 2. Permissions

The following table presents all users permissions involved on our platform. These are useful to restrict some resources to only a designated group within all the users.

<table>
    <tr><th>GST</th><td>Guest</td><td>Non-authenticated user</td></tr>
    <tr><th>MBR</th><td>Member</td><td>Authenticated user</td></tr>
    <tr><th>UBL</th><td>Unblocked</td><td>Authenticated non blocked user</td></tr>
    <tr><th>BLK</th><td>Blocked</td><td>Authenticated blocked user</td></tr>
    <tr><th>OWN</th><td>Owner</td><td>Owner of a post, comment or profile.</td></tr>
    <tr><th>MOD</th><td>Moderator</td><td>User who has been promoted to moderator</td></tr>
    <tr><th>ADM</th><td>Administrator</td><td>Platform administrator</td></tr>
</table>


## 3. Modules

The following section describes every module in detail. For each module there is a description of involved web resources (URL, description, method, parameters, request body, permissions, UI, AJAX Calls, etc.) in order to fully describe the system's architecture.

### Module M01: Content Browsing & Visualization

#### Endpoints of Content Browsing & Visualization

* [**R101**](#r101-view-post): View Post [```/posts/{id}```]
* [**R102**](#r102-personal-feed): Personal Feed [```/feed```]
* [**R103**](#r103-homepage): Homepage [```/home```]
* [**R104**](#r104-search-results-page): Search Results Page [```/search-results```]
* [**R105**](#r105-search-action): Search Action [```/search```]
* [**R106**](#r106-filter-search-results-action): Filter Search Results Action [```/search/filter```]
* [**R107**](#r107-top-posts-api): Top Posts API [```/api/top```]
* [**R108**](#r108-hot-posts-api): Hot Posts API [```/api/hot```]
* [**R109**](#r109-fresh-posts-api): Fresh Posts API [```/api/fresh```]


#### R101: View Post

<table>
    <tr><th>URL</th><td colspan="2"><code>/posts/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2">Shows the post's page.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Post primary key</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui05-post">UI05</a></td></tr>
    <tr><th rowspan="10">AJAX Calls</th><td colspan="2"><a href="#r206-add-comment">R206</a></td></tr>
    <tr><td colspan="2"><a href="#r207-edit-comment">R207</a></td></tr>
    <tr><td colspan="2"><a href="#r208-delete-comment">R208</a></td></tr>
    <tr><td colspan="2"><a href="#r211-edit-post-categories">R211</a></td></tr>
    <tr><td colspan="2"><a href="#r301-star-post">R301</a></td></tr>
    <tr><td colspan="2"><a href="#r302-unstar-post">R302</a></td></tr>
    <tr><td colspan="2"><a href="#r305-rate-content">R305</a></td></tr>
    <tr><td colspan="2"><a href="#r306-delete-content-rating">R306</a></td></tr>
    <tr><td colspan="2"><a href="#r307-report-content">R307</a></td></tr>
    <tr><td colspan="2"><a href="#r310-enabledisable-notification">R310</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r105-search-action">R105</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R102: Personal Feed

<table>
    <tr><th>URL</th><td colspan="2"><code>/feed</code></td></tr>
    <tr><th>Description</th><td colspan="2">User's personal feed.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>User's primary key</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui10-personal-feed">UI10</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r105-search-action">R105</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">MBR</td></tr>
</table>

#### R103: Homepage

<table>
    <tr><th>URL</th><td colspan="2"><code>/home</code></td></tr>
    <tr><th>Description</th><td colspan="2">Landing page of the website.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
   <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui01-home">UI01</a></td></tr>
    <tr><th rowspan="7" >AJAX Calls</th><td colspan="2"><a href="#r107-top-posts-api">R107</a></td></tr>
    <tr><td colspan="2"><a href="#r108-hot-posts-api">R108</a></td></tr>
    <tr><td colspan="2"><a href="#r109-fresh-posts-api">R109</a></td></tr>
    <tr><td colspan="2"><a href="#r301-star-post">R301</a></td></tr>
    <tr><td colspan="2"><a href="#r302-unstar-post">R302</a></td></tr>
    <tr><td colspan="2"><a href="#r305-rate-content">R305</a></td></tr>
    <tr><td colspan="2"><a href="#r306-delete-content-rating">R306</a></td>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r105-search-action">R105</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R104: Search Results Page

<table>
    <tr><th>URL</th><td colspan="2"><code>/search-results</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Page that displays search results. </td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui06-search">UI06</a></td></tr>
    <tr><th rowspan="7" >AJAX Calls</th><td colspan="2"><a href="#r107-top-posts-api">R107</a></td></tr>
    <tr><td colspan="2"><a href="#r108-hot-posts-api">R108</a></td></tr>
    <tr><td colspan="2"><a href="#r109-fresh-posts-api">R109</a></td></tr>
    <tr><td colspan="2"><a href="#r301-star-post">R301</a></td></tr>
    <tr><td colspan="2"><a href="#r302-unstar-post">R302</a></td></tr>
    <tr><td colspan="2"><a href="#r305-rate-content">R305</a></td></tr>
    <tr><td colspan="2"><a href="#r306-delete-content-rating">R306</a></td>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r106-filter-search-results-action">R106</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R105: Search Action

<table>
    <tr><th>URL</th><td colspan="2"><code>/search</code></td></tr>
    <tr><th>Description</th><td colspan="2"> This web resource searches the system for posts and returns the results.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>?query: string</td><td>User's search query.</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r104-search-results-page">R104</a></td><td>Success</td></tr>
    <tr><td><a href="#r402-404-error-page">R402</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R106: Filter Search Results Action

<table>
    <tr><th>URL</th><td colspan="2"><code>/search/filter</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that applies filters to the search results.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th rowspan="3">Request Body</th><td>?username: boolean</td><td> Include matches on posts' usernames. </td></tr>
    <tr><td>?title: boolean</td><td> Include matches on posts' titles. </td></tr>
    <tr><td>?category: boolean</td><td> Include matches on posts' categories. </td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r104-search-results-page">R104</a></td><td>Success</td></tr>
    <tr><td><a href="#r402-404-page">R402</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R107: Top Posts API

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/top</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Web resource that searches the database for top posts. </td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th rowspan="4">Parameters</th><td>?query: string</td><td>Search query submitted by the user.</td></tr>
    <tr><td>?username: boolean</td><td> Filter on posts' usernames. </td></tr>
    <tr><td>?title: boolean</td><td> Filter on posts' titles. </td></tr>
    <tr><td>?category: boolean</td><td> Filter on posts' categories. </td></tr>
    <tr><th rowspan="2">Returns</th><td>200 OK</td><td>Fetch successful.</td></tr>
    <tr><td>204 No Content</td><td>The request was successful but there was no content matching the query.</td></tr>
    <tr><th>Response Body</th><td colspan="2"><a href="#json109-tophotfresh-posts-post">JSON109</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R108: Hot Posts API

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/hot</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Web resource that searches the database for hot posts. </td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th rowspan="4">Parameters</th><td>?query: string</td><td>Search query submitted by the user</td></tr>
    <tr><td>?username: boolean</td><td> Filter on posts' usernames. </td></tr>
    <tr><td>?title: boolean</td><td> Filter on posts' titles. </td></tr>
    <tr><td>?category: boolean</td><td> Filter on posts' categories. </td></tr>
    <tr><th rowspan="2">Returns</th><td>200 OK</td><td>Fetch successful.</td></tr>
    <tr><td>204 No Content</td><td>The request was successful but there was no content matching the query.</td></tr>
    <tr><th>Response Body</th><td colspan="2"><a href="#json109-tophotfresh-posts-post">JSON109</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R109: Fresh Posts API

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/fresh</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Web resource that searches the database for fresh posts. </td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th rowspan="4">Parameters</th><td>?query: string</td><td>Search query submitted by the user</td></tr>
    <tr><td>?username: boolean</td><td> Filter on posts' usernames. </td></tr>
    <tr><td>?title: boolean</td><td> Filter on posts' titles. </td></tr>
    <tr><td>?category: boolean</td><td> Filter on posts' categories. </td></tr>
    <tr><th rowspan="2">Returns</th><td>200 OK</td><td>Fetch successful.</td></tr>
    <tr><td>204 No Content</td><td>The request was successful but there was no content matching the query.</td></tr>
    <tr><th>Response Body</th><td colspan="2"><a href="#json109-tophotfresh-posts-post">JSON109</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

### Module M02: Content Management 

#### Endpoints of Content Management

* [**R201**](#r201-create-post-form): Create Post Form [```/posts```]
* [**R202**](#r202-create-post-action): Create Post Action [```/posts```]
* [**R203**](#r203-edit-post-form): Edit Post Form [```/posts/{id}/edit```]
* [**R204**](#r204-edit-post-action): Edit Post Action [```/posts/{id}```]
* [**R205**](#r205-delete-post): Delete Post [```/posts/{id}```]
* [**R206**](#r206-add-comment): Add Comment [```/api/comments```]
* [**R207**](#r207-show-comment): Show Comment [```/api/comments/{id}```]
* [**R208**](#r208-edit-comment): Edit Comment [```/api/comments/{id}```]
* [**R209**](#r209-delete-comment): Delete Comment [```/api/comments/{id}```]
* [**R210**](#r210-add-category): Add Category [```/api/categories```]
* [**R211**](#r211-rename-category): Rename Category [```/api/categories/{id}```]
* [**R212**](#r212-edit-post-categories): Edit Post Categories [```/api/posts/{id}/categories```]

#### R201: Create Post Form

<table>
    <tr><th>URL</th><td colspan="2"><code>/posts</code></td></tr>
    <tr><th>Description</th><td colspan="2">Page with a form to create a new post.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui04-new-post">UI04</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r202-create-post-action">R202</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">MBR</td></tr>
</table>

#### R202: Create Post Action

<table>
    <tr><th>URL</th><td colspan="2"><code>/posts</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that creates a new post with the input given.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th rowspan="3">Request Body</th><td>+title: string</td><td>Post title</td></tr>
    <tr><td>+body: string</td><td>Post body</td></tr>
    <tr><td>+categories: array</td><td>Post category ids</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r101-view-post">R101</a></td><td>Success</td></tr>
    <tr><td><a href="#r201-create-post-form">R201</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">MBR</td></tr>
</table>

#### R203: Edit Post Form

<table>
    <tr><th>URL</th><td colspan="2"><code>/posts/{id}/edit</code></td></tr>
    <tr><th>Description</th><td colspan="2">Page with a form to edit a post.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Post id</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui04-new-post">UI04</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r204-edit-post-action">R204</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN</td></tr>
</table>

#### R204: Edit Post Action

<table>
    <tr><th>URL</th><td colspan="2"><code>/posts/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that updates the information on a post.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th rowspan="3">Request Body</th><td>+title: string</td><td>Post title</td></tr>
    <tr><td>+body: string</td><td>Post body</td></tr>
    <tr><td>+categories: array</td><td>Post category ids</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r101-view-post">R101</a></td><td>Success</td></tr>
    <tr><td><a href="#r201-create-post-form">R201</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN</td></tr>
</table>

#### R205: Delete Post

<table>
    <tr><th>URL</th><td colspan="2"><code>/posts/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2">This resource removes a post from the system.</td></tr>
    <tr><th>Method</th><td colspan="2">DELETE</td></tr>
    <tr><th>Parameter</th><td>+id: integer</td><td>Post id</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r103-homepage">R103</a></td><td>Success</td></tr>
    <tr><td><a href="#r101-view-post">R101</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN, MOD</td></tr>
</table>

#### R206: Add Comment

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/comments</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that allows a user to comment on a post.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th rowspan="3">Request Body</th><td>+body: string</td><td>Comment body</td></tr>
    <tr><td>+thread: int</td><td>ID of the thread this comment belongs to</td></tr>
    <tr><td>+post_id: int</td><td>ID of the post this comment belongs to</td></tr>
    <tr><th rowspan="2">Returns</th><td>200 OK</td><td>Comment successfully posted.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No post or thread with the specified primary key exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">MBR</td></tr>
</table>

#### R207: Show Comment

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/comments/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that generates the HTML for a comment (used in AJAX calls that create a comment).</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Comment primary key</td></tr>
    <tr><th>Request Body</th><td>+content: string</td><td>Comment body</td></tr>
    <tr><th rowspan="2">Returns</th><td>200 OK</td><td>Comment successfully updated.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No comment with the specified primary keys exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN</td></tr>
</table>

#### R208: Edit Comment

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/comments/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that allows a user to edit his/hers comments.</td></tr>
    <tr><th>Method</th><td colspan="2">PUT</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Comment primary key</td></tr>
    <tr><th>Request Body</th><td>+body: string</td><td>Comment body</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Comment successfully updated.</td></tr>
    <tr><td>403 Access Denied</td><td>Error. User is not the owner of the comment.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No post or comment with the specified primary keys exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN</td></tr>
</table>

#### R209: Delete Comment

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/comments/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that allows a user to delete his/hers comments.</td></tr>
    <tr><th>Method</th><td colspan="2">DELETE</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Comment primary key</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Comment successfully deleted.</td></tr>
    <tr><td>403 Access Denied</td><td>Error. User is not the owner of the comment.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No comment with the specified primary key exist.</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN, MOD</td></tr>
</table>

#### R210: Add Category

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/categories</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource to add a new category.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th>Request Body</th><td>+name: string</td><td>Category name</td></tr>
    <tr><th rowspan="2">Returns</th><td>200 OK</td><td>Category successfully added.</td></tr>
    <tr><td>403 Access Denied</td><td>Error. User has no permission to add a new category.</td></tr>
    <tr><th>Permissions</th><td colspan="2">ADM</td></tr>
</table>

#### R211: Rename Category

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/categories/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource to rename an existing category.</td></tr>
    <tr><th>Method</th><td colspan="2">PUT</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Category primary key</td></tr>
    <tr><th>Request Body</th><td>+name: string</td><td>Category name</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Category successfully rename.</td></tr>
    <tr><td>403 Access Denied</td><td>Error. User has no permission to rename a category.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No category with the specified primary key exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">ADM</td></tr>
</table>

#### R212: Edit Post Categories

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/posts/{id}/categories</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that allows a user to update his/hers posts' categories.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Post primary key</td></tr>
    <tr><th>Request Body</th><td>+categories: array</td><td>Category id array</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Post categories successfully updated.</td></tr>
    <tr><td>403 Access Denied</td><td>Error. User is not the owner of the post neither a moderator.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No post or category with the specified primary keys exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN, MOD</td></tr>
</table>

### Module M03: User Interactions 

#### Endpoints of User Interactions

* [**R301**](#r301-star-post): Star Post [```/api/posts/{id}/stars```]
* [**R302**](#r302-unstar-post): Unstar Post [```/api/posts/{id}/stars```]
* [**R303**](#r303-star-category): Star Category [```/api/categories/{id}/stars```]
* [**R304**](#r304-unstar-category): Unstar Category [```/api/categories/{id}/stars```]
* [**R305**](#r305-rate-content): Rate Content [```/api/contents/{id}/votes```]
* [**R306**](#r306-delete-content-rating): Delete Content Rating [```/api/contents/{id}/votes```]
* [**R307**](#r307-update-content-rating): Update Content Rating [```/api/contents/{id}/votes```]
* [**R308**](#r308-report-content): Report Content [```/api/reports/{id}```]
* [**R309**](#r309-contest-content-report): Contest Content Report [```/api/reports/{id}/contests```]
* [**R310**](#r310-view-notifications): View Notifications [```/api/notifications/{id}```]
* [**R311**](#r311-enabledisable-notification): Disable Notification [```/api/contents/{id}/notification```]

#### R301: Star Post

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/posts/{id}/stars</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that stars a post.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th>Parameters</th><td>id: integer</td><td>Post id</td></tr>
    <tr><th>Request Body</th><td>+user_id: integer</td><td>User's primary key</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Post successfully starred.</td></tr>
    <tr><td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No user or post with the specified primary keys exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">MBR</td></tr>
</table>

#### R302: Unstar Post

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/posts/{id}/stars</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that unstars a post.</td></tr>
    <tr><th>Method</th><td colspan="2">DELETE</td></tr>
    <tr><th>Parameters</th><td>id: integer</td><td>Post id</td></tr>
    <tr><th>Request Body</th><td>+user_id: integer</td><td>User's primary key</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Post successfully unstarred.</td></tr>
    <tr><td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No user or post with the specified primary keys exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">MBR</td></tr>
</table>

#### R303: Star Category

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/categories/{id}/stars</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that stars a category.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Category id</td></tr>
    <tr><th>Request Body</th><td>+user_id: integer</td><td>User's primary key</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Category successfully starred.</td></tr>
    <tr><td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No user or category with the specified primary keys exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">MBR</td></tr>
</table>

#### R304: Unstar Category

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/categories/{id}/stars</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that unstars a category.</td></tr>
    <tr><th>Method</th><td colspan="2">DELETE</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Category id</td></tr>
    <tr><th>Request Body</th><td>+user_id: integer</td><td>User's primary key</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Category successfully unstarred.</td></tr>
    <tr><td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No user or category with the specified primary keys exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">MBR</td></tr>
</table>

#### R305: Rate Content

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/contents/{id}/votes</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that rates a content.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Content id</td></tr>
    <tr><th>Request Body</th><td>+type: integer</td><td>Vote's value (upvote or downvote)</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Content successfully rated.</td></tr>
    <tr><td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No content with the specified primary key exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">UBL</td></tr>
</table>


#### R306: Delete Content Rating

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/contents/{id}/votes</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that clears a content's rating.</td></tr>
    <tr><th>Method</th><td colspan="2">DELETE</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Content id</td></tr>
    <tr><th>Request Body</th><td>+type: integer</td><td>Vote's value (upvote or downvote)</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Content rating successfully cleared.</td></tr>
    <tr><td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No content with the specified primary key exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">UBL</td></tr>
</table>

#### R307: Update Content Rating

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/contents/{id}/votes</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that updates a content's rating.</td></tr>
    <tr><th>Method</th><td colspan="2">PUT</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Content id</td></tr>
    <<tr><th>Request Body</th><td>+type: integer</td><td>Vote's value (upvote or downvote)</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Content rating successfully cleared.</td></tr>
    <tr><td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header.</td></tr>
    <tr><td>404 Not Found</td><td>Error. N content with the specified primary keys exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">UBL</td></tr>
</table>

#### R308: Report Content

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/reports/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that adds a report to content.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Content id</td></tr>
    <tr><th rowspan="2">Request Body</th><td>+user_id: integer</td><td>User's primary key</td></tr>
    <tr><td>+reason: string</td><td>Report's given reason.</td></tr>
    <tr><th rowspan="4">Returns</th><td>200 OK</td><td>Content successfully reported.</td></tr>
    <tr><td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No user or content with the specified primary keys exists.</td></tr>
    <tr><td>406 Not Acceptable</td><td>Error. The user has already reported the content previously.</td></tr>
    <tr><th>Permissions</th><td colspan="2">UBL</td></tr>
</table>

#### R309: Contest Content Report

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/reports/{id}/contests</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that contests a given report.
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Report file's primary key.</td></tr>
    <tr><th rowspan="2">Request Body</th><td>+user_id: integer</td><td>User's primary key</td></tr>
    <tr><td>+reason: string</td><td>Report's given reason.</td></tr>
    <tr><th rowspan="4">Returns</th><td>200 OK</td><td>Report contest successfully submited.</td>
    <tr><td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No user or report with the specified primary keys exists.</td></tr>
    <tr><td>406 Not Acceptable</td><td>Error. The blocked user has already made a contest to the given report.</td></tr></tr>
    <tr><th>Permissions</th><td colspan="2">BLK</td></tr>
</table>

#### R310: View Notifications

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/users/{id}/notifications</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that retrieves all user's notifications.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>User's primary key</td></tr>
    <tr><th rowspan="1">Returns</th><td colspan="2"><a href="#json309-notifications-notification">JSON309</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">MBR</td></tr>
</table>


#### R311: Enable/Disable Notification

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/contents/{id}/notification</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that disables notifications from a particular content.</td></tr>
    <tr><th>Method</th><td colspan="2">PUT</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>Content's primary key</td></tr>
    <tr><th>Request Body</th><td>+activated: boolean</td><td>Status of notifications for the post.</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Notifications successfully disabled for the given content.</td></tr>
    <tr><td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No user or content with the specified primary keys exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN</td></tr>
</table>

### Module M04: Static Pages & User Management

#### Endpoints of Static Pages & User Management

* [**R401**](#r401-403-error-page): 403 Error Page [```/403```]
* [**R402**](#r402-404-error-page): 404 Error Page [```/404```]
* [**R403**](#r403-team-page): Team Page [```/team-page```]
* [**R404**](#r404-regulations-page): Regulations Page [```/regulations-page```]
* [**R405**](#r405-user-management): User Management [```/api/users/{id}/role```]
* [**R406**](#r406-block-user): Block User [```/api/users/{id}/block```]

#### R401: 403 Error Page

<table>
    <tr><th>URL</th><td colspan="2"><code>/403</code></td></tr>
    <tr><th>Description</th><td colspan="2">Get 403 error page.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui14-error-403">UI14</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r105-search-action">R105</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R402: 404 Error Page

<table>
    <tr><th>URL</th><td colspan="2"><code>/404</code></td></tr>
    <tr><th>Description</th><td colspan="2">Get 404 error page.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui15-error-404">UI15</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r105-search-action">R105</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R403: Team Page

<table>
    <tr><th>URL</th><td colspan="2"><code>/team-page</code></td></tr>
    <tr><th>Description</th><td colspan="2">Get team page.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui02-team">UI02</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r105-search-action">R105</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R404: Regulations Page

<table>
    <tr><th>URL</th><td colspan="2"><code>/regulations-page</code></td></tr>
    <tr><th>Description</th><td colspan="2">Get regulations page.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui03-regulations">UI03</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r105-search-action">R105</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R405: User Management

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/users/{id}/role</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that allows to change a user's permissions.</td></tr>
    <tr><th>Method</th><td colspan="2">PUT</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>User's primary key</td></tr>
    <tr><th>Request Body</th><td>+role: string</td><td>User's new role</td></tr>
    <tr><th rowspan="4">Returns</th><td>200 OK</td><td>User's role successfully updated.</td></tr>
    <tr><td>400 Bad Request</td><td>Error. Unrecognized role received.</td></tr>
    <tr><td>403 Forbidden</td><td>Error. User doesn't have permission to change another user's role.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No user with the specified primary key exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">ADM</td></tr>
</table>

#### R406: Block User

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/users/{id}/block</code></td></tr>
    <tr><th>Description</th><td colspan="2">Web resource that allows a moderator to block a user.</td></tr>
    <tr><th>Method</th><td colspan="2">PUT</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>User's primary key</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>User successfully blocked.</td></tr>
    <tr><td>403 Forbidden</td><td>Error. User doesn't have permission to block a user.</td></tr>
    <tr><td>404 Not Found</td><td>Error. No user with the specified primary key exists.</td></tr>
    <tr><th>Permissions</th><td colspan="2">MOD, ADM</td></tr>
</table>


### Module M05: Authentication

#### Endpoints of Authentication

* [**R501**](#r501-login-form): Login Form [```/login```]
* [**R502**](#r502-login-action): Login Action [```/login```]
* [**R503**](#r503-register-form): Register Form [```/register```]
* [**R504**](#r504-register-action): Register Action [```/register```]
* [**R505**](#r505-logout): Logout [```/logout```]
* [**R506**](#r506-recover-password-form): Recover Password Form [```/password-recovery```]
* [**R507**](#r507-recover-password-action): Recover Password Action [```/password-recovery```]

#### R501: Login Form

<table>
    <tr><th>URL</th><td colspan="2"><code>/login</code></td></tr>
    <tr><th>Description</th><td colspan="2">Page that contains a form that allows a user to login to his account.

</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui12-login">UI012</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r502-login-action">R502</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R502: Login Action

<table>
    <tr><th>URL</th><td colspan="2"><code>/login</code></td></tr>
    <tr><th>Description</th><td colspan="2">This resource logs the user into the system. Redirects to the home page on success and to the login form on failure.

</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th rowspan="2">Request Body</th><td>+username: string</td><td>User's username </td></tr>
    <tr><td>+password: string</td><td>User's password</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r103-homepage">R103</a></td><td>Success</td></tr>
    <tr><td><a href="#r501-login-form">R501</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R503: Register Form

<table>
    <tr><th>URL</th><td colspan="2"><code>/register</code></td></tr>
    <tr><th>Description</th><td colspan="2">Page that contains a form that allows a user to register to the platform.

</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui13-register">UI013</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r504-register-action">R504</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R504: Register Action

<table>
    <tr><th>URL</th><td colspan="2"><code>/register</code></td></tr>
    <tr><th>Description</th><td colspan="2">This resource inserts the user into the system. Redirects to the home page on success and to the register form on failure.

</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th rowspan="4">Request Body</th><td>+username: string</td><td>User's username </td></tr>
    <tr><td>+email: string</td><td>User's email</td></tr>
     <tr><td>+password: string</td><td>User's password</td></tr>
      <tr><td>+repeat_password: string</td><td>User's password</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r103-homepage">R103</a></td><td>Success</td></tr>
    <tr><td><a href="#r503-register-form">R503</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R505: Logout

<table>
    <tr><th>URL</th><td colspan="2"><code>/logout</code></td></tr>
    <tr><th>Description</th><td colspan="2">This resource logs out from the platform.

</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r103-homepage">R103</a></td><td>Success</td></tr>
    <tr><td><a href="#r402-404-error-page">R402</a></td><td>Forbidden</td></tr>
    <tr><th>Permissions</th><td colspan="2">MBR</td></tr>
</table>

#### R506: Recover Password Form

<table>
    <tr><th>URL</th><td colspan="2"><code>/password-recovery</code></td></tr>
    <tr><th>Description</th><td colspan="2">Page that contains a form that allows a user to insert an email to receive password reset link.

</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r507-recover-password-action">R507</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R507: Recover Password Action

<table>
    <tr><th>URL</th><td colspan="2"><code>/password-recovery</code></td></tr>
    <tr><th>Description</th><td colspan="2">This resource sends a link to the user's email so that the password recovery action can be performed
</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th rowspan="1">Request Body</th><td>+email: string</td><td>User's email </td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r501-login-form">R501</a></td><td>Success</td></tr>
    <tr><td><a href="#r506-recover-password-form">R506</a></td><td>Error (for example, if such email is not associated with any user)</td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

### Module M06: Profile management

#### Endpoints of Profile Management

* [**R601**](#r601-view-profile): View Profile [```/users/{id}```]
* [**R602**](#r602-delete-profile): Delete Profile [```/users/{id}```]
* [**R603**](#r603-edit-profile-form): Edit Profile Form [```/users/{id}/edit```]
* [**R604**](#r604-edit-profile-photo-action): Edit Profile Photo Action [```/users/{id}/edit/photo```]
* [**R605**](#r605-edit-profile-biography-action): Edit Profile Biography Action [```/users/{id}/edit/bio```]
* [**R606**](#r606-edit-profile-credentials-action): Edit Profile Credentials Action [```/users/{id}/edit/credentials```]

#### R601: View Profile

<table>
    <tr><th>URL</th><td colspan="2"><code>/users/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2">Shows a user profile page</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>User id</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui08-profile">UI008</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r105-search-action">R105</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">GST</td></tr>
</table>

#### R602: Delete Profile

<table>
    <tr><th>URL</th><td colspan="2"><code>/users/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2">This web resource deletes a user from the system.</td></tr>
    <tr><th>Method</th><td colspan="2">DELETE</td></tr>
    <tr><th>Parameter</th><td>+id: integer</td><td>User id</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r103-homepage">R103</a></td><td>Success</td></tr>
    <tr><td><a href="#r601-view-profile">R601</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN</td></tr>
</table>

#### R603: Edit Profile Form

<table>
    <tr><th>URL</th><td colspan="2"><code>/users/{id}/edit</code></td></tr>
    <tr><th>Description</th><td colspan="2">Page with a form to edit a user's profile.</td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>User id</td></tr>
    <tr><th>UI</th><td colspan="2"><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui09-edit-profile">UI009</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r604-edit-profile-action">R604</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN</td></tr>
</table>

#### R604: Edit Profile Photo Action

<table>
    <tr><th>URL</th><td colspan="2"><code>/users/{id}/edit/photo</code></td></tr>
    <tr><th>Description</th><td colspan="2">This resource updates the user's profile photo.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>User id</td></tr>
    <tr><th>Request Body</th><td>+avatar: file</td><td>Image file to be used as profile photo.</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r601-view-profile">R601</a></td><td>Success</td></tr>
    <tr><td><a href="#r603-edit-profile-form">R603</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN</td></tr>
</table>

#### R605: Edit Profile Biography Action

<table>
    <tr><th>URL</th><td colspan="2"><code>/users/{id}/edit/bio</code></td></tr>
    <tr><th>Description</th><td colspan="2">This resource updates the user's profile bio.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>User id</td></tr>
    <tr><th>Request Body</th><td>+bio: string</td><td>New biography text</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r601-view-profile">R601</a></td><td>Success</td></tr>
    <tr><td><a href="#r603-edit-profile-form">R603</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN</td></tr>
</table>

#### R606: Edit Profile Credentials Action

<table>
    <tr><th>URL</th><td colspan="2"><code>/users/{id}/edit/credentials</code></td></tr>
    <tr><th>Description</th><td colspan="2">This resource updates the user's credentials for the platform.</td></tr>
    <tr><th>Method</th><td colspan="2">POST</td></tr>
    <tr><th>Parameters</th><td>+id: integer</td><td>User id</td></tr>
    <tr><th rowspan="4">Request Body</th><td>+username: string</td><td>User's new name (unique in the database)</td></tr>
    <tr><td>+email: string</td><td>User's new email (unique in the database)</td></tr>
    <tr><td>?old_pass: string</td><td>User's old password (to confirm the request's authenticity)</td></tr>
    <tr><td>?password: string</td><td>User's new password</td></tr>
    <tr><th rowspan="2">Redirects</th><td><a href="#r601-view-profile">R601</a></td><td>Success</td></tr>
    <tr><td><a href="#r603-edit-profile-form">R603</a></td><td>Error</td></tr>
    <tr><th>Permissions</th><td colspan="2">OWN</td></tr>
</table>


### Module M07: Moderators & Reporting System

#### Endpoints of Moderators & Reporting System

* [**R701**](#r701-reports-page): Reports Page [```/reports```]
* [**R702**](#r702-post-reports-api): Posts Reports API [```/api/reports/posts```]
* [**R703**](#r703-comment-reports-api): Comments Reports API [```/api/reports/comments```]
* [**R704**](#r704-contests-api): Contests API [```/api/reports/contests```]
* [**R705**](#r705-review-post-report): Review Post Report [```/reports/posts/{id}```]
* [**R706**](#r706-review-comment-report): Review Comment Report [```/reports/comments/{id}```]
* [**R707**](#r707-review-contest): Review Contest [```/reports/contests/{id}```]

#### R701: Reports Page

<table>
    <tr><th>URL</th><td colspan="2"><code>/reports</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Page with a table containing reports of the platform. </td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>UI</th><td><a href="https://git.fe.up.pt/lbaw/lbaw1920/lbaw2031/-/wikis/a3#ui11-reports">UI011</a></td></tr>
    <tr><th rowspan="3" >AJAX Calls</th><td colspan="2"><a href="#r702-post-reports-api">R702</a></td></tr>
    <tr><td colspan="2"><a href="#r703-comment-reports-api">R703</a></td></tr>
    <tr><td colspan="2"><a href="#r704-contests-api">R704</a></td></tr>
    <tr><th>SUBMIT</th><td colspan="2"><a href="#r105-search-action">R105</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">MOD</td></tr>
</table>

#### R702: Post Reports API

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/reports/posts</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Web resource that fetches from the database all reports issued against posts. </td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>?id: integer</td><td>Optional post primary key to retrieve a single report file. </td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Fetch successful.</td></tr>
    <tr><td>204 No Content</td><td>The request was successful but there were no reports.</td></tr>
    <tr><td>403 Forbidden</td><td>Error. User has no permission to retrieve reports information.</td></tr>
    <tr><th>Response Body</th><td colspan="2"><a href="#json702-postscomments-reports-report_file">JSON702</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">MOD</td></tr>
</table>

#### R703: Comment Reports API

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/reports/comments</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Web resource that fetches from the database all reports issued against comments. </td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>?id: integer</td><td>Optional comment primary key to retrieve a single report file. </td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Fetch successful.</td></tr>
    <tr><td>204 No Content</td><td>The request was successful but there were no reports.</td></tr>
    <tr><td>403 Forbidden</td><td>Error. User has no permission to retrieve reports information.</td></tr>
    <tr><th>Response Body</th><td colspan="2"><a href="#json702-postscomments-reports-report_file">JSON702</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">MOD</td></tr>
</table>

#### R704: Contests API

<table>
    <tr><th>URL</th><td colspan="2"><code>/api/reports/contests</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Web resource that fetches from the database all contests. </td></tr>
    <tr><th>Method</th><td colspan="2">GET</td></tr>
    <tr><th>Parameters</th><td>?id: integer</td><td>Optional contest primary key to retrieve a single contest. </td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Fetch successful.</td></tr>
    <tr><td>204 No Content</td><td>The request was successful but there were no contests.</td></tr>
    <tr><td>403 Forbidden</td><td>Error. User has no permission to retrieve contests information.</td></tr>
    <tr><th>Response Body</th><td colspan="2"><a href="#json704-contests-contest">JSON704</a></td></tr>
    <tr><th>Permissions</th><td colspan="2">MOD</td></tr>
</table>

#### R705: Review Post Report

<table>
    <tr><th>URL</th><td colspan="2"><code>/reports/posts/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Web resource that changes the sorted status of a post report file. </td></tr>
    <tr><th>Method</th><td colspan="2">PUT</td></tr>
    <tr><th>Parameters</th><td>?id: integer</td><td>Report file primary key.</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Report file sorted successfully.</td></tr>
    <tr><td>403 Forbidden</td><td>Error. User has no permission to review a report.</td></tr>
    <tr><td>404 Not Found</td><td>Error. Report file does not exist.</td></tr>
    <tr><th>Permissions</th><td colspan="2">MOD</td></tr>
</table>


#### R706: Review Comment Report

<table>
    <tr><th>URL</th><td colspan="2"><code>/reports/comments/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Web resource that changes the sorted status of a comment report file. </td></tr>
    <tr><th>Method</th><td colspan="2">PUT</td></tr>
    <tr><th>Parameters</th><td>?id: integer</td><td>Report file primary key.</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Report file sorted successfully.</td></tr>
    <tr><td>403 Forbidden</td><td>Error. User has no permission to review a report.</td></tr>
    <tr><td>404 Not Found</td><td>Error. Report file does not exist.</td></tr>
    <tr><th>Permissions</th><td colspan="2">MOD</td></tr>
</table>

#### R707: Review Contest

<table>
    <tr><th>URL</th><td colspan="2"><code>/reports/contests/{id}</code></td></tr>
    <tr><th>Description</th><td colspan="2"> Web resource that deletes a contest after it has been reviewed. </td></tr>
    <tr><th>Method</th><td colspan="2">DELETE</td></tr>
    <tr><th>Parameters</th><td>?id: integer</td><td>Contest primary key.</td></tr>
    <tr><th rowspan="3">Returns</th><td>200 OK</td><td>Contest deleted successfully.</td></tr>
    <tr><td>403 Forbidden</td><td>Error. User has no permission to review a report.</td></tr>
    <tr><td>404 Not Found</td><td>Error. Report file does not exist.</td></tr>
    <tr><th>Permissions</th><td colspan="2">MOD</td></tr>
</table>

## 4. JSON/XML Types

The following JSON types represent some of our API's responses. These are used as a way to exchange information between the client and the server.

### JSON109: Top/Hot/Fresh Posts: {post}[]
JSON returned by Top, Hot and Fresh Posts API. This JSON holds an array with information needed to display posts. The array is ordered by the most relevant depending on the API used to fetch it.

```json
{
  "posts": [
    {
      "id": "1",
      "title": "I am a man in my early thirties and I have been with the same woman since I was 13. Ask me anything.",
      "num_comments": "142305",
      "author": "Glaurung",
      "body": "Celerabrating our 19th anniversary together this week.",
      "creation_time": "2020-02-08 23:58:01",
      "upvotes": "4320142",
      "downvotes": "13540"
    },
    {
      "id": "2",
      "title": "I am a 105-Year-Old Woman. AMA",
      "num_comments": "14305",
      "author": "WorldVexillologist",
      "body": "For clarification, I am her 2x great-grand nephew who will be answering these questions when Im at her house sometime after January 6th, 2020 (Most likely Jan 11, the dates not final). The answers will be direct quotes from her.",
      "creation_time": "2020-02-14 12:01:30",
      "upvotes": "1520442",
      "downvotes": "512"
    }
  ]
}
```

### JSON309: Notifications: {notification}[]
JSON used to display all notifications of a user. This JSON holds an array of notifications, each one including important information to display itself.

```json
{
    "notifications": [
        {
            "id": "53",
            "time": "2020-03-23 09:30:20",
            "description": "32 new comments on your post 'I'm asexual. AMA.",
            "motive": "New Comment",
            "viewed": false
        },
        {
            "id": "1023",
            "time": "2020-03-22 21:46:14",
            "description": "There is 1 new post in the Community forum.",
            "motive": "Community Post",
            "viewed": true
        }
    ]
}
``` 

### JSON702: Posts/Comments Reports: {report_file}[]
JSON used to display reports of a content. This JSON is returned by Post and Comment Reports API. It holds an array of report files, which include the *reports* array with all the reports associated with the file and, subsequently, with the content.

```json
{
  "report_files": [
    {
      "id": "12",
      "content_id": "3",
      "sorted": false,
      "reviewer": null,
      "reports": [
          {
              "id": "28",
              "author_id": "1433",
              "reason": "Offensive",
              "time": "2020-03-04 17:51:00"
          },
          {
              "id": "42",
              "author_id": "127",
              "reason": "Violent",
              "time": "2020-03-14 07:09:56"
          }
      ]
    },
    {
      "id": "21",
      "content_id": "78",
      "sorted": false,
      "reviewer": null,
      "reports": [
          {
              "id": "12",
              "author_id": "3521",
              "reason": "Spam",
              "time": "2020-01-04 23:01:24"
          }
      ]
    }
  ]
}
```

### JSON704: Contests: {contest}[]
JSON used to display contests. This JSON holds an array of contests, which include all necessary info for a moderator to review it.

```json
{
  "contests": [
    {
      "id": "1",
      "report_id": "12",
      "justification": "Someone hacked my account and posted that, I would never say something so vile!",
      "time": "2020-03-15 02:12:47"
    },
    {
      "id": "2",
      "report_id": "21",
      "justification": "It must have been someone else reposting my comment, I swear I did not spam my post.",
      "time": "2020-03-04 17:51:00"
    },
    {
      "id": "3",
      "report_id": "17",
      "justification": "According to the bible, gay marriage isn't right. I shouldn't be blocked for this!",
      "time": "2020-01-06 09:34:52"
    },
  ]
}
```

## Revision history

**24/04/2020**
* Updated R206 and R208 urls
* Added R207 Show Comment
* Updated R604 title and url
* Added R605 and R606
* Added R307
* Updated R201 url

**09/05/2020**
* Updated R212 permissions

**14/05/2020**
* Fixed M01 index

***
GROUP2031, 09/04/2020

* Bernardo Manuel Esteves dos Santos, [up201706534@fe.up.pt](mailto:up201706534@fe.up.pt)
* Carlos Jorge Direito Albuquerque, [up201706735@fe.up.pt](mailto:up201706735@fe.up.pt)
* Tito Alexandre Trindade Griné, [up201706732@fe.up.pt](mailto:up201706732@fe.up.pt) (Editor)
* Vítor Hugo Leite Gonçalves, [up201703917@fe.up.pt](mailto:up201703917@fe.up.pt)